# firmware
Прошивки и установочные пакеты

|Имя каталога  |Описание              |
|--------------|----------------------|
|Adapter485    |прошивки адаптера USB-RS485 на базе stm32f072 |
|AndroidPult   |установочный пакет для пульта ДУ на базе Андроид. |
|IronArt       |установочные пакеты IronArt для windows и linux |
|RoboScript    |Различные скрипты|
|ServoBoardV3  |прошивки движка в металлическом корпусе с 14-битным энкодером |
|ServoBoardV4C |прошивки движка в металлическом корпусе с 21-битным энкодером |
|ServoEngin    |установочный пакет программы автономного управления серводвигателями через адаптер USB-RS485 Roki-U2RS |
|ServoLBoardV1 |прошивки движка в пластиковом корпусе с 14-битным энкодером |
|Tester        |прошивки кабельного тестера (калибратора). Прошивки движков в кабельный тестер загружаются с компьютера через USB с помощью программы Upgrader |
|Upgrader      |установочный пакет и наборы актуальных прошивок для загрузки в кабельный тестер |
|ZubrControllerB3 |прошивки Зубр-контроллера B3. Трехплатный вариант. В имени файла присутствует указание типа головы и "инверсность" сигналов uart из головы (на некоторых образцах) |
|ZebrControllerB6 |прошивки Зубр-контроллера B6. Одноплатный вариант. В имени файла присутствует указание типа интерфейса для OpenMV и "инверсность" сигналов uart из openmv |

## Замечания по установке программ под linux.
1. Работает под ubuntu 22, возможно и более свежих

2. sudo apt install libxcb-cursor0 libxcb-cursor-dev
sudo apt install libgl1-mesa-dev

3. Добавить текущего пользователя linux в группу dialout
sudo usermod -aG dialout username  # замените username на имя пользователя

## Использование механизма переключения алгоритмов регулирования движков

Начиная с версии 51 для металлического движка с 21-битным энкодером и с версии 164 Зубр-контроллера,
добавлена возможность переключения алгоритмов управления неспосредственно с помощью скрипта.
Для работы всей этой системы необходимо обновить прошивку Зубр-контроллера до версии 164 и
прошивки металлических движков с 21-битным энкодером до версии 51. В настоящее время
в движки с 21-битным энкодером прошивается версия 47. Версия 51 "умеет" сохранить основные
параметры движка из прежней версии. Это касается идентификатора движка, его калибровку, лимиты.
Значения параметров регуляторов устанавливаются ПО УМОЛЧАНИЮ! Поэтому, после прошивки убедитесь, что
нужные параметры установлены правильно. Есть смысл предварительно сфотографировать их перед прошивкой.
Регулятор, предназначенный для RL теперь имеет код 9! Регулятор с кодом 1 - это обычный регулятор
движков Роки2.

Для переключения режимов (регуляторов) можно воспользоваться программой IronArt. Пункт
меню Сервис->модули через Зубр-контроллер... После сканирования появляется диалоговое окно со списокм устройств.
Выбираете экспертный режим, нужный движок и правите параметр Режим.

Также можно воспользоваться скриптом, чтобы поменять режимы сразу у нескольких движков. Пример такого скрипта
в RoboScript/metalMotorMode.cpp

Выбранный режим сохраняется и после выключения питания.